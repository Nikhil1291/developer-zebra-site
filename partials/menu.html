<aside class="tree-sidebar">            
            <div class="row">
                <div class="col-sm-12">
                    <div class="sidebar-container" data-spy="affix" data-offset-top="60" data-offset-bottom="200">
                        <ul  class="" >
                        {{#each this.menu}}
                            <li class="">
                                {{#if this.items}}
                                <span class="arrow"></span>
                                {{/if}}
                                {{#if this.url}}
                                <a href="{{this.url}}">
                                {{else}}
                                <a>
                                {{/if}}
                                <span class="arrow-li">{{this.title}}</span>
                                </a> 
                                {{#if this.items}}
                                    <ul style="">
                                    {{#each this.items}}
                                        <li>
                                            {{#if this.items}}
                                            <span class="arrow"></span>
                                            {{/if}}
                                            {{#if this.url}}
                                            <a href="{{this.url}}">
                                            {{else}}
                                            <a>
                                            {{/if}}
                                            <span class="arrow-li">{{this.title}}</span>
                                            </a> 
                                            {{#if this.items}}
                                                <ul >
                                                {{#each this.items}}
                                                    <li>
                                                    <a href="{{this.url}}"><span>{{this.title}}</span></a>
                                                    </li>
                                                {{/each}}                        
                                                </ul>
                                            {{/if}}
                                        </li>
                                    {{/each}}                        
                                    </ul>
                                {{/if}}
                            </li>
                        {{/each}}
                        </ul>
                    </div>
                </div>
            </div>
</aside>

<script type="text/javascript">
    $(window).load(function() {
        var pathname = window.location.pathname.slice(0, -1);
        // console.log(pathname);
        var menuitem = $('.sidebar-container').find('a[href^="' + pathname + '"]').first()[0];
        var menulevel = $(menuitem).parents('ul').length;
        // console.log(menuitem);
        // console.log(menulevel);
        var parentLI = $(menuitem).parent().parent().parent();
        var itemarrow = parentLI.find('.arrow').first()[0];

        //now check for higher level
        if(menulevel==3){

            var parentFirstLevel = $(parentLI).parent().parent().first()[0];
            var parentarrow = $(parentFirstLevel).find('.arrow').first()[0];
            parentarrow.click();
        }

        if(menulevel>1){
            itemarrow.click();

        }
        $(menuitem).addClass('sidebar-selected');
        $(menuitem).parent().append('<ul style="display:block" id="indoc"></ul>')
        $('h2').each(function(index, value){
              if($(this).attr('id')){
                var anchor = "#" + $(this).attr('id');
                var text = $(this).text();
                var li = "<li><a href='" + anchor + "'>" + text + "</a>" ;
                $('#indoc').append(li);               
              }

              
        });
    });



</script>